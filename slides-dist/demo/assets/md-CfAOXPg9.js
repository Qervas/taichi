import{o as m,b as i,w as p,g as s,ad as a,v as r,x as c,T as t}from"./modules/vue-CYPF2tZc.js";import{I as o}from"./slidev/default-Bu3OAgZl.js";import{u as h,f as u}from"./slidev/context-DfsvCotc.js";import"./index-DR_ZOGka.js";import"./modules/shiki-DXooxXci.js";const g=""+new URL("../c_matrix_viz.png",import.meta.url).href,_={__name:"slides-demo-mlsmpm.md__slidev_8",setup(d){const{$clicksContext:n,$frontmatter:e}=h();return n.setup(),(v,l)=>(m(),i(o,r(c(t(u)(t(e),7))),{default:p(()=>[...l[0]||(l[0]=[s("h1",null,"C 矩阵：MLS-MPM 的灵魂",-1),s("div",{class:"grid grid-cols-[1.3fr_1fr] gap-6 mt-1"},[s("div",null,[s("h3",null,"C = 局部速度场（粒子周围「在旋转、拉伸还是压缩」）"),s("p",null,[s("span",{class:"katex-display"},[s("span",{class:"katex"},[s("span",{class:"katex-mathml"},[s("math",{xmlns:"http://www.w3.org/1998/Math/MathML",display:"block"},[s("semantics",null,[s("mrow",null,[s("mi",{mathvariant:"bold"},"v"),s("mo",{stretchy:"false"},"("),s("mi",{mathvariant:"bold"},"x"),s("mo",{stretchy:"false"},")"),s("mo",null,"≈"),s("msub",null,[s("mi",{mathvariant:"bold"},"v"),s("mi",null,"p")]),s("mo",null,"+"),s("mi",{mathvariant:"bold"},"C"),s("mo",null,"⋅"),s("mo",{stretchy:"false"},"("),s("mi",{mathvariant:"bold"},"x"),s("mo",null,"−"),s("msub",null,[s("mi",{mathvariant:"bold"},"x"),s("mi",null,"p")]),s("mo",{stretchy:"false"},")")]),s("annotation",{encoding:"application/x-tex"},"\\mathbf{v}(\\mathbf{x}) \\approx \\mathbf{v}_p + \\mathbf{C} \\cdot (\\mathbf{x} - \\mathbf{x}_p) ")])])]),s("span",{class:"katex-html","aria-hidden":"true"},[s("span",{class:"base"},[s("span",{class:"strut",style:{height:"1em","vertical-align":"-0.25em"}}),s("span",{class:"mord mathbf",style:{"margin-right":"0.01597em"}},"v"),s("span",{class:"mopen"},"("),s("span",{class:"mord mathbf"},"x"),s("span",{class:"mclose"},")"),s("span",{class:"mspace",style:{"margin-right":"0.2778em"}}),s("span",{class:"mrel"},"≈"),s("span",{class:"mspace",style:{"margin-right":"0.2778em"}})]),s("span",{class:"base"},[s("span",{class:"strut",style:{height:"0.8694em","vertical-align":"-0.2861em"}}),s("span",{class:"mord"},[s("span",{class:"mord mathbf",style:{"margin-right":"0.01597em"}},"v"),s("span",{class:"msupsub"},[s("span",{class:"vlist-t vlist-t2"},[s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"0.1514em"}},[s("span",{style:{top:"-2.55em","margin-left":"-0.016em","margin-right":"0.05em"}},[s("span",{class:"pstrut",style:{height:"2.7em"}}),s("span",{class:"sizing reset-size6 size3 mtight"},[s("span",{class:"mord mathnormal mtight"},"p")])])]),s("span",{class:"vlist-s"},"​")]),s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"0.2861em"}},[s("span")])])])])]),s("span",{class:"mspace",style:{"margin-right":"0.2222em"}}),s("span",{class:"mbin"},"+"),s("span",{class:"mspace",style:{"margin-right":"0.2222em"}})]),s("span",{class:"base"},[s("span",{class:"strut",style:{height:"0.6861em"}}),s("span",{class:"mord mathbf"},"C"),s("span",{class:"mspace",style:{"margin-right":"0.2222em"}}),s("span",{class:"mbin"},"⋅"),s("span",{class:"mspace",style:{"margin-right":"0.2222em"}})]),s("span",{class:"base"},[s("span",{class:"strut",style:{height:"1em","vertical-align":"-0.25em"}}),s("span",{class:"mopen"},"("),s("span",{class:"mord mathbf"},"x"),s("span",{class:"mspace",style:{"margin-right":"0.2222em"}}),s("span",{class:"mbin"},"−"),s("span",{class:"mspace",style:{"margin-right":"0.2222em"}})]),s("span",{class:"base"},[s("span",{class:"strut",style:{height:"1.0361em","vertical-align":"-0.2861em"}}),s("span",{class:"mord"},[s("span",{class:"mord mathbf"},"x"),s("span",{class:"msupsub"},[s("span",{class:"vlist-t vlist-t2"},[s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"0.1514em"}},[s("span",{style:{top:"-2.55em","margin-left":"0em","margin-right":"0.05em"}},[s("span",{class:"pstrut",style:{height:"2.7em"}}),s("span",{class:"sizing reset-size6 size3 mtight"},[s("span",{class:"mord mathnormal mtight"},"p")])])]),s("span",{class:"vlist-s"},"​")]),s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"0.2861em"}},[s("span")])])])])]),s("span",{class:"mclose"},")")])])])])]),s("p",null,[s("strong",null,"C 的三重身份 — 一石三鸟")]),s("table",null,[s("thead",null,[s("tr",null,[s("th",null,"身份"),s("th",null,"用途"),s("th",null,"代码")])]),s("tbody",null,[s("tr",null,[s("td",null,"APIC 传输"),s("td",null,"保持角动量（旋涡不耗散）"),s("td",null,[s("code",null,"affine @ dpos")])]),s("tr",null,[s("td",null,[a("速度梯度 "),s("span",{class:"katex"},[s("span",{class:"katex-mathml"},[s("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[s("semantics",null,[s("mrow",null,[s("mi",{mathvariant:"normal"},"∇"),s("mi",{mathvariant:"bold"},"v")]),s("annotation",{encoding:"application/x-tex"},"\\nabla\\mathbf{v}")])])]),s("span",{class:"katex-html","aria-hidden":"true"},[s("span",{class:"base"},[s("span",{class:"strut",style:{height:"0.6833em"}}),s("span",{class:"mord"},"∇"),s("span",{class:"mord mathbf",style:{"margin-right":"0.01597em"}},"v")])])])]),s("td",null,"trace© = 散度 → 更新 J"),s("td",null,[s("code",null,"J *= 1+dt*trace(C)")])]),s("tr",null,[s("td",null,"F 更新"),s("td",null,"形变追踪（雪/弹性体）"),s("td",null,[s("code",null,"F = (I+dt*C) @ F")])])])]),s("div",{class:"mt-2 p-2 bg-purple-900 bg-opacity-30 rounded text-xs"},[s("p",null,[s("strong",null,"论文核心发现"),a("：这三者数学上完全等价，零额外开销")]),s("p",null,"水模拟只用 trace©；雪/弹性体还需要完整 C 追踪形变方向")])]),s("div",null,[s("img",{src:g,class:"w-full rounded",style:{"max-height":"200px","object-fit":"contain"}}),s("p",null,[s("strong",null,[a("P2G 中 "),s("code",null,"affine @ dpos"),a(" 同时做两件事：")])]),s("ol",null,[s("li",null,[s("strong",null,"APIC 外推"),a("："),s("code",null,"mass * C @ dpos"),a(" → 恢复 grid 速度场")]),s("li",null,[s("strong",null,"应力散射"),a("："),s("code",null,"stress * dpos"),a(" → 压力梯度力传递")])]),s("div",{class:"mt-2 p-2 bg-blue-900 bg-opacity-30 rounded text-xs"},[s("p",null,[s("strong",null,[s("span",{class:"katex"},[s("span",{class:"katex-mathml"},[s("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[s("semantics",null,[s("mrow",null,[s("mn",null,"4"),s("mi",{mathvariant:"normal"},"/"),s("mi",{mathvariant:"normal"},"Δ"),s("msup",null,[s("mi",null,"x"),s("mn",null,"2")])]),s("annotation",{encoding:"application/x-tex"},"4/\\Delta x^2")])])]),s("span",{class:"katex-html","aria-hidden":"true"},[s("span",{class:"base"},[s("span",{class:"strut",style:{height:"1.0641em","vertical-align":"-0.25em"}}),s("span",{class:"mord"},"4/Δ"),s("span",{class:"mord"},[s("span",{class:"mord mathnormal"},"x"),s("span",{class:"msupsub"},[s("span",{class:"vlist-t"},[s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"0.8141em"}},[s("span",{style:{top:"-3.063em","margin-right":"0.05em"}},[s("span",{class:"pstrut",style:{height:"2.7em"}}),s("span",{class:"sizing reset-size6 size3 mtight"},[s("span",{class:"mord mtight"},"2")])])])])])])])])])]),a(" = B-spline 惯性张量的逆（常数）")]),a(' — "Moving Least Squares" 名字来源')])])])],-1)])]),_:1},16))}};export{_ as default};
