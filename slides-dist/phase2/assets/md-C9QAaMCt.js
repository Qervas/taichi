import{_ as h}from"./slidev/CodeBlockWrapper.vue_vue_type_script_setup_true_lang-Br9GkM7A.js";import{o as c,b as g,w as t,g as s,ad as l,d as n,m as e,v as o,x as u,T as p}from"./modules/vue-BOLmPnWG.js";import{I as d}from"./slidev/default-QCPF7EtB.js";import{u as y,f as v}from"./slidev/context-S2B6uJDZ.js";import"./modules/unplugin-icons-BmlxQJto.js";import"./index-D3SD0EfW.js";import"./modules/shiki-DqztgEPn.js";const k={class:"grid grid-cols-2 gap-8"},E={__name:"slides-phase2.md__slidev_6",setup(f){const{$clicksContext:m,$frontmatter:r}=y();return m.setup(),(b,a)=>{const i=h;return c(),g(d,o(u(p(v)(p(r),5))),{default:t(()=>[a[10]||(a[10]=s("h1",null,"Affine Matrix C 与 APIC 传输",-1)),s("div",k,[s("div",null,[a[1]||(a[1]=s("h3",null,"C = 局部速度梯度",-1)),a[2]||(a[2]=s("p",null,[s("span",{class:"katex-display"},[s("span",{class:"katex"},[s("span",{class:"katex-mathml"},[s("math",{xmlns:"http://www.w3.org/1998/Math/MathML",display:"block"},[s("semantics",null,[s("mrow",null,[s("msub",null,[s("mi",{mathvariant:"bold"},"C"),s("mi",null,"p")]),s("mo",null,"="),s("mfrac",null,[s("mn",null,"4"),s("mrow",null,[s("mi",{mathvariant:"normal"},"Δ"),s("msup",null,[s("mi",null,"x"),s("mn",null,"2")])])]),s("munder",null,[s("mo",null,"∑"),s("mi",null,"i")]),s("msub",null,[s("mi",null,"w"),s("mrow",null,[s("mi",null,"i"),s("mi",null,"p")])]),s("msub",null,[s("mi",{mathvariant:"bold"},"v"),s("mi",null,"i")]),s("mo",{stretchy:"false"},"("),s("msub",null,[s("mi",{mathvariant:"bold"},"x"),s("mi",null,"i")]),s("mo",null,"−"),s("msub",null,[s("mi",{mathvariant:"bold"},"x"),s("mi",null,"p")]),s("msup",null,[s("mo",{stretchy:"false"},")"),s("mi",null,"T")])]),s("annotation",{encoding:"application/x-tex"},"\\mathbf{C}_p = \\frac{4}{\\Delta x^2} \\sum_i w_{ip} \\mathbf{v}_i (\\mathbf{x}_i - \\mathbf{x}_p)^T ")])])]),s("span",{class:"katex-html","aria-hidden":"true"},[s("span",{class:"base"},[s("span",{class:"strut",style:{height:"0.9722em","vertical-align":"-0.2861em"}}),s("span",{class:"mord"},[s("span",{class:"mord mathbf"},"C"),s("span",{class:"msupsub"},[s("span",{class:"vlist-t vlist-t2"},[s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"0.1514em"}},[s("span",{style:{top:"-2.55em","margin-left":"0em","margin-right":"0.05em"}},[s("span",{class:"pstrut",style:{height:"2.7em"}}),s("span",{class:"sizing reset-size6 size3 mtight"},[s("span",{class:"mord mathnormal mtight"},"p")])])]),s("span",{class:"vlist-s"},"​")]),s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"0.2861em"}},[s("span")])])])])]),s("span",{class:"mspace",style:{"margin-right":"0.2778em"}}),s("span",{class:"mrel"},"="),s("span",{class:"mspace",style:{"margin-right":"0.2778em"}})]),s("span",{class:"base"},[s("span",{class:"strut",style:{height:"2.5991em","vertical-align":"-1.2777em"}}),s("span",{class:"mord"},[s("span",{class:"mopen nulldelimiter"}),s("span",{class:"mfrac"},[s("span",{class:"vlist-t vlist-t2"},[s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"1.3214em"}},[s("span",{style:{top:"-2.314em"}},[s("span",{class:"pstrut",style:{height:"3em"}}),s("span",{class:"mord"},[s("span",{class:"mord"},"Δ"),s("span",{class:"mord"},[s("span",{class:"mord mathnormal"},"x"),s("span",{class:"msupsub"},[s("span",{class:"vlist-t"},[s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"0.7401em"}},[s("span",{style:{top:"-2.989em","margin-right":"0.05em"}},[s("span",{class:"pstrut",style:{height:"2.7em"}}),s("span",{class:"sizing reset-size6 size3 mtight"},[s("span",{class:"mord mtight"},"2")])])])])])])])])]),s("span",{style:{top:"-3.23em"}},[s("span",{class:"pstrut",style:{height:"3em"}}),s("span",{class:"frac-line",style:{"border-bottom-width":"0.04em"}})]),s("span",{style:{top:"-3.677em"}},[s("span",{class:"pstrut",style:{height:"3em"}}),s("span",{class:"mord"},[s("span",{class:"mord"},"4")])])]),s("span",{class:"vlist-s"},"​")]),s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"0.686em"}},[s("span")])])])]),s("span",{class:"mclose nulldelimiter"})]),s("span",{class:"mspace",style:{"margin-right":"0.1667em"}}),s("span",{class:"mop op-limits"},[s("span",{class:"vlist-t vlist-t2"},[s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"1.05em"}},[s("span",{style:{top:"-1.8723em","margin-left":"0em"}},[s("span",{class:"pstrut",style:{height:"3.05em"}}),s("span",{class:"sizing reset-size6 size3 mtight"},[s("span",{class:"mord mathnormal mtight"},"i")])]),s("span",{style:{top:"-3.05em"}},[s("span",{class:"pstrut",style:{height:"3.05em"}}),s("span",null,[s("span",{class:"mop op-symbol large-op"},"∑")])])]),s("span",{class:"vlist-s"},"​")]),s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"1.2777em"}},[s("span")])])])]),s("span",{class:"mspace",style:{"margin-right":"0.1667em"}}),s("span",{class:"mord"},[s("span",{class:"mord mathnormal",style:{"margin-right":"0.02691em"}},"w"),s("span",{class:"msupsub"},[s("span",{class:"vlist-t vlist-t2"},[s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"0.3117em"}},[s("span",{style:{top:"-2.55em","margin-left":"-0.0269em","margin-right":"0.05em"}},[s("span",{class:"pstrut",style:{height:"2.7em"}}),s("span",{class:"sizing reset-size6 size3 mtight"},[s("span",{class:"mord mtight"},[s("span",{class:"mord mathnormal mtight"},"i"),s("span",{class:"mord mathnormal mtight"},"p")])])])]),s("span",{class:"vlist-s"},"​")]),s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"0.2861em"}},[s("span")])])])])]),s("span",{class:"mord"},[s("span",{class:"mord mathbf",style:{"margin-right":"0.01597em"}},"v"),s("span",{class:"msupsub"},[s("span",{class:"vlist-t vlist-t2"},[s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"0.3117em"}},[s("span",{style:{top:"-2.55em","margin-left":"-0.016em","margin-right":"0.05em"}},[s("span",{class:"pstrut",style:{height:"2.7em"}}),s("span",{class:"sizing reset-size6 size3 mtight"},[s("span",{class:"mord mathnormal mtight"},"i")])])]),s("span",{class:"vlist-s"},"​")]),s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"0.15em"}},[s("span")])])])])]),s("span",{class:"mopen"},"("),s("span",{class:"mord"},[s("span",{class:"mord mathbf"},"x"),s("span",{class:"msupsub"},[s("span",{class:"vlist-t vlist-t2"},[s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"0.3117em"}},[s("span",{style:{top:"-2.55em","margin-left":"0em","margin-right":"0.05em"}},[s("span",{class:"pstrut",style:{height:"2.7em"}}),s("span",{class:"sizing reset-size6 size3 mtight"},[s("span",{class:"mord mathnormal mtight"},"i")])])]),s("span",{class:"vlist-s"},"​")]),s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"0.15em"}},[s("span")])])])])]),s("span",{class:"mspace",style:{"margin-right":"0.2222em"}}),s("span",{class:"mbin"},"−"),s("span",{class:"mspace",style:{"margin-right":"0.2222em"}})]),s("span",{class:"base"},[s("span",{class:"strut",style:{height:"1.1774em","vertical-align":"-0.2861em"}}),s("span",{class:"mord"},[s("span",{class:"mord mathbf"},"x"),s("span",{class:"msupsub"},[s("span",{class:"vlist-t vlist-t2"},[s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"0.1514em"}},[s("span",{style:{top:"-2.55em","margin-left":"0em","margin-right":"0.05em"}},[s("span",{class:"pstrut",style:{height:"2.7em"}}),s("span",{class:"sizing reset-size6 size3 mtight"},[s("span",{class:"mord mathnormal mtight"},"p")])])]),s("span",{class:"vlist-s"},"​")]),s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"0.2861em"}},[s("span")])])])])]),s("span",{class:"mclose"},[s("span",{class:"mclose"},")"),s("span",{class:"msupsub"},[s("span",{class:"vlist-t"},[s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"0.8913em"}},[s("span",{style:{top:"-3.113em","margin-right":"0.05em"}},[s("span",{class:"pstrut",style:{height:"2.7em"}}),s("span",{class:"sizing reset-size6 size3 mtight"},[s("span",{class:"mord mathnormal mtight",style:{"margin-right":"0.13889em"}},"T")])])])])])])])])])])])],-1)),a[3]||(a[3]=s("p",null,"编码粒子周围的速度场：",-1)),a[4]||(a[4]=s("ul",null,[s("li",null,[s("strong",null,"trace©"),l(" = 散度（膨胀/压缩）→ 更新 J")]),s("li",null,"反对称部分 = 旋涡"),s("li",null,"对称部分 = 应变率")],-1)),a[5]||(a[5]=s("h3",null,"P2G 中的使用",-1)),n(i,e({},{title:"",ranges:[]}),{default:t(()=>[...a[0]||(a[0]=[s("pre",{class:"shiki shiki-themes vitesse-dark vitesse-light slidev-code",style:{"--shiki-dark":"#dbd7caee","--shiki-light":"#393a34","--shiki-dark-bg":"#121212","--shiki-light-bg":"#ffffff"}},[s("code",{class:"language-python"},[s("span",{class:"line"},[s("span",{style:{"--shiki-dark":"#DBD7CAEE","--shiki-light":"#393A34"}},"affine "),s("span",{style:{"--shiki-dark":"#666666","--shiki-light":"#999999"}},"="),s("span",{style:{"--shiki-dark":"#DBD7CAEE","--shiki-light":"#393A34"}}," stress_term "),s("span",{style:{"--shiki-dark":"#CB7676","--shiki-light":"#AB5959"}},"+"),s("span",{style:{"--shiki-dark":"#DBD7CAEE","--shiki-light":"#393A34"}}," mass "),s("span",{style:{"--shiki-dark":"#CB7676","--shiki-light":"#AB5959"}},"*"),s("span",{style:{"--shiki-dark":"#DBD7CAEE","--shiki-light":"#393A34"}}," C")]),l(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-dark":"#DBD7CAEE","--shiki-light":"#393A34"}},"momentum_i "),s("span",{style:{"--shiki-dark":"#666666","--shiki-light":"#999999"}},"+="),s("span",{style:{"--shiki-dark":"#DBD7CAEE","--shiki-light":"#393A34"}}," w "),s("span",{style:{"--shiki-dark":"#CB7676","--shiki-light":"#AB5959"}},"*"),s("span",{style:{"--shiki-dark":"#666666","--shiki-light":"#999999"}}," ("),s("span",{style:{"--shiki-dark":"#DBD7CAEE","--shiki-light":"#393A34"}},"mass "),s("span",{style:{"--shiki-dark":"#CB7676","--shiki-light":"#AB5959"}},"*"),s("span",{style:{"--shiki-dark":"#DBD7CAEE","--shiki-light":"#393A34"}}," v "),s("span",{style:{"--shiki-dark":"#CB7676","--shiki-light":"#AB5959"}},"+"),s("span",{style:{"--shiki-dark":"#DBD7CAEE","--shiki-light":"#393A34"}}," affine "),s("span",{style:{"--shiki-dark":"#CB7676","--shiki-light":"#AB5959"}},"@"),s("span",{style:{"--shiki-dark":"#DBD7CAEE","--shiki-light":"#393A34"}}," dpos"),s("span",{style:{"--shiki-dark":"#666666","--shiki-light":"#999999"}},")")])])],-1)])]),_:1},16),a[6]||(a[6]=s("p",null,[s("code",null,"affine @ dpos"),l(" 同时完成：APIC 速度外推 + 压力梯度力")],-1))]),s("div",null,[a[8]||(a[8]=s("h3",null,"C 的双重身份",-1)),n(i,e({},{title:"",ranges:[]}),{default:t(()=>[...a[7]||(a[7]=[s("pre",{class:"shiki shiki-themes vitesse-dark vitesse-light slidev-code",style:{"--shiki-dark":"#dbd7caee","--shiki-light":"#393a34","--shiki-dark-bg":"#121212","--shiki-light-bg":"#ffffff"}},[s("code",{class:"language-text"},[s("span",{class:"line"},[s("span",null,"  只有速度 v（PIC）：")]),l(`
`),s("span",{class:"line"},[s("span",null,"  ─────────────────")]),l(`
`),s("span",{class:"line"},[s("span",null,"       ↑")]),l(`
`),s("span",{class:"line"},[s("span",null,"       │  v")]),l(`
`),s("span",{class:"line"},[s("span",null,"       ●")]),l(`
`),s("span",{class:"line"},[s("span")]),l(`
`),s("span",{class:"line"},[s("span",null,"  速度 + 梯度 C（APIC/MLS-MPM）：")]),l(`
`),s("span",{class:"line"},[s("span",null,"  ────────────────────────")]),l(`
`),s("span",{class:"line"},[s("span",null,"       ↗ ↑ ↖")]),l(`
`),s("span",{class:"line"},[s("span",null,"       → ● ←  C 描述周围如何变化")]),l(`
`),s("span",{class:"line"},[s("span",null,"       ↙ ↓ ↘")])])],-1)])]),_:1},16),a[9]||(a[9]=s("div",{class:"mt-4 p-3 bg-blue-900 bg-opacity-30 rounded text-sm"},[s("p",null,[s("strong",null,"MLS-MPM 的优雅之处"),l("：")]),s("ol",null,[s("li",null,[s("strong",null,"传输时"),l("：APIC affine matrix → 保持角动量")]),s("li",null,[s("strong",null,"物理上"),l("：trace© = 散度 → 更新 J")])]),s("p",null,"一个矩阵同时服务于传输精度和物理更新"),s("p",null,[l('"Moving Least Squares" 名字来自 '),s("span",{class:"katex"},[s("span",{class:"katex-mathml"},[s("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[s("semantics",null,[s("mrow",null,[s("mfrac",null,[s("mn",null,"4"),s("mrow",null,[s("mi",{mathvariant:"normal"},"Δ"),s("msup",null,[s("mi",null,"x"),s("mn",null,"2")])])])]),s("annotation",{encoding:"application/x-tex"},"\\frac{4}{\\Delta x^2}")])])]),s("span",{class:"katex-html","aria-hidden":"true"},[s("span",{class:"base"},[s("span",{class:"strut",style:{height:"1.1901em","vertical-align":"-0.345em"}}),s("span",{class:"mord"},[s("span",{class:"mopen nulldelimiter"}),s("span",{class:"mfrac"},[s("span",{class:"vlist-t vlist-t2"},[s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"0.8451em"}},[s("span",{style:{top:"-2.655em"}},[s("span",{class:"pstrut",style:{height:"3em"}}),s("span",{class:"sizing reset-size6 size3 mtight"},[s("span",{class:"mord mtight"},[s("span",{class:"mord mtight"},"Δ"),s("span",{class:"mord mtight"},[s("span",{class:"mord mathnormal mtight"},"x"),s("span",{class:"msupsub"},[s("span",{class:"vlist-t"},[s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"0.7463em"}},[s("span",{style:{top:"-2.786em","margin-right":"0.0714em"}},[s("span",{class:"pstrut",style:{height:"2.5em"}}),s("span",{class:"sizing reset-size3 size1 mtight"},[s("span",{class:"mord mtight"},"2")])])])])])])])])])]),s("span",{style:{top:"-3.23em"}},[s("span",{class:"pstrut",style:{height:"3em"}}),s("span",{class:"frac-line",style:{"border-bottom-width":"0.04em"}})]),s("span",{style:{top:"-3.394em"}},[s("span",{class:"pstrut",style:{height:"3em"}}),s("span",{class:"sizing reset-size6 size3 mtight"},[s("span",{class:"mord mtight"},[s("span",{class:"mord mtight"},"4")])])])]),s("span",{class:"vlist-s"},"​")]),s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"0.345em"}},[s("span")])])])]),s("span",{class:"mclose nulldelimiter"})])])])]),l(" 系数（B-spline 惯性张量逆）")])],-1))])])]),_:1},16)}}};export{E as default};
